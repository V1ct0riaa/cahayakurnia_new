<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<div th:fragment="scripts">
    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Simple Scripts -->
    <script>
        // Simple DOM ready function
        document.addEventListener('DOMContentLoaded', function() {
            // Simple hover effects for product cards
            initProductCardHover();
            
            // Simple smooth scrolling for anchor links
            initSmoothScrolling();
            
            // Simple search functionality (if exists)
            initSearchFunctionality();
            
            // Simple category filter (if exists)
            initCategoryFilter();
            
            // Simple view toggle (if exists)
            initViewToggle();
        });
        
        // Simple product card hover effects
        function initProductCardHover() {
            const productCards = document.querySelectorAll('.product-card');
            productCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                    this.style.boxShadow = '0 4px 16px rgba(0, 0, 0, 0.15)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                    this.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.1)';
                });
            });
        }
        
        // Simple smooth scrolling
        function initSmoothScrolling() {
            const links = document.querySelectorAll('a[href^="#"]');
            links.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        }
        
        // Simple search functionality
        function initSearchFunctionality() {
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    const query = this.value.toLowerCase();
                    const products = document.querySelectorAll('.product-card');
                    
                    products.forEach(product => {
                        const productName = product.querySelector('.card-title')?.textContent.toLowerCase() || '';
                        const productDesc = product.querySelector('.card-text')?.textContent.toLowerCase() || '';
                        
                        if (productName.includes(query) || productDesc.includes(query)) {
                            product.style.display = 'block';
                        } else {
                            product.style.display = 'none';
                        }
                    });
                });
            }
        }
        
        // Simple category filter
        function initCategoryFilter() {
            const categoryButtons = document.querySelectorAll('.category-filter');
            const products = document.querySelectorAll('.product-card');
            
            categoryButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    
                    // Remove active class from all buttons
                    categoryButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Filter products
                    products.forEach(product => {
                        const productCategory = product.getAttribute('data-category');
                        
                        if (category === 'all' || productCategory === category) {
                            product.style.display = 'block';
                        } else {
                            product.style.display = 'none';
                        }
                    });
                });
            });
        }
        
        // Simple view toggle
        function initViewToggle() {
            const gridViewBtn = document.getElementById('gridView');
            const listViewBtn = document.getElementById('listView');
            const productGrid = document.getElementById('productsGrid');
            const productList = document.getElementById('productsList');
            
            if (gridViewBtn && listViewBtn) {
                gridViewBtn.addEventListener('click', function() {
                    if (productGrid) productGrid.style.display = 'flex';
                    if (productList) productList.style.display = 'none';
                    this.classList.add('active');
                    listViewBtn.classList.remove('active');
                });
                
                listViewBtn.addEventListener('click', function() {
                    if (productGrid) productGrid.style.display = 'none';
                    if (productList) productList.style.display = 'block';
                    this.classList.add('active');
                    gridViewBtn.classList.remove('active');
                });
            }
        }
        
        // Simple stock status update
        function updateStockStatus() {
            const stockElements = document.querySelectorAll('.stock-status');
            stockElements.forEach(element => {
                const stock = parseInt(element.getAttribute('data-stock'));
                if (stock <= 5 && stock > 0) {
                    element.textContent = 'Stok Menipis';
                    element.className = 'stock-badge low';
                } else if (stock <= 0) {
                    element.textContent = 'Habis';
                    element.className = 'stock-badge out';
                } else {
                    element.textContent = 'Tersedia';
                    element.className = 'stock-badge available';
                }
            });
        }
        
        // Simple debounce function for performance
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
        
        // Simple throttle function for performance
        function throttle(func, limit) {
            let inThrottle;
            return function() {
                const args = arguments;
                const context = this;
                if (!inThrottle) {
                    func.apply(context, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            }
        }
    </script>
</div>
</html>