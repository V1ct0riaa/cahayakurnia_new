<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head}">
	<title th:text="${product.name} + ' - Cahaya Kurnia'">Detail Produk - Cahaya Kurnia</title>
</head>
<body>
<div th:replace="~{fragments/navbar :: navbar}"></div>

<!-- Product Detail Section -->
<div class="container mt-5 pt-5">
	<nav aria-label="breadcrumb">
		<ol class="breadcrumb">
			<li class="breadcrumb-item"><a href="/">Beranda</a></li>
			<li class="breadcrumb-item"><a href="/products">Produk</a></li>
			<li class="breadcrumb-item active" aria-current="page" th:text="${product.name}">Nama Produk</li>
		</ol>
	</nav>

	<div class="row">
		<!-- Product Image -->
		<div class="col-lg-6 mb-4">
			<div class="product-image-container">
				<img th:if="${product.imageUrl != null and product.imageUrl != '' and product.imageUrl != 'null'}" th:src="${product.imageUrl}" class="product-detail-image" alt="Product Image">
				<img th:unless="${product.imageUrl != null and product.imageUrl != '' and product.imageUrl != 'null'}" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjUwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjFmNWY5Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzY2NzM4NyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIEltYWdlPC90ZXh0Pjwvc3ZnPg==" class="product-detail-image" alt="No Image">
			</div>
		</div>

		<!-- Product Info -->
		<div class="col-lg-6">
			<div class="product-info">
				<h1 class="h2 mb-3" th:text="${product.name}">Nama Produk</h1>
				<div class="mb-3">
					<span class="badge bg-secondary me-2" th:text="${product.sku}">SKU-001</span>
					<span th:if="${product.category != null and !product.category.isEmpty()}" class="badge bg-primary" th:text="${product.category}">Kategori</span>
				</div>
				<div class="price-section mb-4">
					<h2 class="price mb-2" th:text="'Rp ' + ${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT')}">Rp 0</h2>
					<div class="stock-info">
						<span th:if="${product.stock > 0}" class="text-success"><i class="bi bi-check-circle me-2"></i>Stok tersedia: <strong th:text="${product.stock}">0</strong></span>
						<span th:if="${product.stock <= 0}" class="text-danger"><i class="bi bi-x-circle me-2"></i>Stok habis</span>
					</div>
				</div>
				<div class="description mb-4">
					<h5>Deskripsi Produk</h5>
					<p class="text-muted" th:text="${product.description}">Deskripsi produk akan ditampilkan di sini.</p>
				</div>
				<div class="product-actions">
					<a href="/products" class="btn btn-outline-primary me-2"><i class="bi bi-arrow-left me-2"></i>Kembali ke Katalog</a>
					<a href="/" class="btn btn-primary"><i class="bi bi-house me-2"></i>Beranda</a>
				</div>
			</div>
		</div>
	</div>

	<!-- Related Products Section -->
	<div class="row mt-5" th:if="${!relatedProducts.isEmpty()}">
		<div class="col-12">
			<h3 class="mb-4">Produk Terkait</h3>
			<div class="row">
				<div class="col-lg-3 col-md-6 mb-4" th:each="relatedProduct : ${relatedProducts}">
					<div class="card product-card h-100">
						<img th:if="${relatedProduct.imageUrl != null and relatedProduct.imageUrl != '' and relatedProduct.imageUrl != 'null'}" th:src="${relatedProduct.imageUrl}" class="related-product-image" alt="Related Product">
						<img th:unless="${relatedProduct.imageUrl != null and relatedProduct.imageUrl != '' and relatedProduct.imageUrl != 'null'}" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjFmNWY5Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzY2NzM4NyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIEltYWdlPC90ZXh0Pjwvc3ZnPg==" class="related-product-image" alt="No Image">
						<div class="card-body d-flex flex-column">
							<h6 class="card-title" th:text="${relatedProduct.name}">Nama Produk</h6>
							<p class="card-text text-muted" th:text="${#strings.abbreviate(relatedProduct.description, 80)}">Deskripsi</p>
							<div class="mt-auto">
								<div class="d-flex justify-content-between align-items-center mb-2">
									<span class="price" th:text="'Rp ' + ${#numbers.formatDecimal(relatedProduct.price, 0, 'COMMA', 0, 'POINT')}">Rp 0</span>
									<small class="text-muted" th:text="'Stok: ' + ${relatedProduct.stock}">Stok: 0</small>
								</div>
								<a th:href="@{/products/{id}(id=${relatedProduct.id})}" class="btn btn-outline-primary btn-sm"><i class="bi bi-eye me-2"></i>Lihat</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div th:replace="~{fragments/footer :: footer}"></div>
<div th:replace="~{fragments/scripts :: scripts}"></div>
</body>
</html>